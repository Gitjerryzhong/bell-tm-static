<modal-dialog title="选择教室" size="lg">
    <modal-body>
        <div class="row">
            <div class="col-4">
                <ng-container *ngIf="!vm.simpleOption">
                <div class="form-group">
                    <label class="control-label">开始周</label>
                    <select class="form-control" name="startWeek" [ngModel]="queryOptions.startWeek" (ngModelChange)="startWeekChanged($event)">
                        <option *ngFor="let week of vm.startWeeks" [ngValue]="week">第{{week}}周</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="control-label">结束周</label>
                    <select class="form-control" name="endWeek" [ngModel]="queryOptions.endWeek" (ngModelChange)="endWeekChanged($event)">
                        <option *ngFor="let week of vm.endWeeks" [ngValue]="week">第{{week}}周</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="control-label">单双周</label>
                    <select class="form-control" name="oddEven" [(ngModel)]="queryOptions.oddEven">
                        <option *ngFor="let item of vm.oddEvens" [ngValue]="item.value">{{item.label}}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="control-label">星期几</label>
                    <select class="form-control" name="dayOfWeek" [(ngModel)]="queryOptions.dayOfWeek">
                        <option *ngFor="let item of vm.dayOfWeeks" [ngValue]="item.value">{{item.label}}</option>
                    </select>
                </div>
                </ng-container>
                <ng-container *ngIf="vm.simpleOption">
                <div class="form-group">
                    <label class="control-label">日期</label><span class="date">{{bookingDay.date.format('YYYY-MM-DD')}}</span>
                    <select class="form-control" name="days" [(ngModel)]="bookingDay">
                        <option *ngFor="let day of vm.days" [ngValue]="day" [title]="day.date.format('YYYY-MM-DD')">第{{day.week}}周 {{day.date.format('dddd')}}</option>
                    </select>
                </div>
                </ng-container>
                <div class="form-group">
                    <label class="control-label">时间段</label>
                    <select class="form-control" name="section" [(ngModel)]="queryOptions.section">
                        <option *ngFor="let section of options.sections" [ngValue]="section">{{section.name}}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="control-label">教室类型</label>
                    <select class="form-control" name="placeType" [(ngModel)]="queryOptions.placeType">
                        <option *ngFor="let placeType of options.placeTypes" [ngValue]="placeType">{{placeType}}</option>
                    </select>
                </div>
            </div>
            <div class="col-8">
                <div class="form-group">
                    <label class="control-label">可选教室 ({{selectedCount}} / {{places.length}})</label>
                    <table class="table table-bordered table-hover table-sm">
                        <thead>
                            <tr>
                                <th>选择</th>
                                <th>教室名称</th>
                                <th>座位数</th>
                                <th>预定数</th>
                            </tr>
                        </thead>
                        <tbody [style.height]="vm.simpleOption ? '330px' : '442px'">
                            <tr *ngFor="let place of places" (click)="placeRowClicked($event, place)" [class.table-info]="place.selected">
                                <td><input type="checkbox" name="places" [(ngModel)]="place.selected"></td>
                                <td>{{place.name}}</td>
                                <td>{{place.seat}}</td>
                                <td>{{place.booking == 0 ? '' : place.booking}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </modal-body>
    <modal-footer>
        <button class="btn btn-secondary mr-auto" (click)="findPlace()">查询</button>
        <button modalCancel>取消</button>
        <button modalOk (click)="ok()">确定</button>
    </modal-footer>
</modal-dialog>